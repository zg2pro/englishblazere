SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";
CREATE USER 'AdminDVD'@'%' IDENTIFIED BY 'Cabale';
GRANT SELECT , INSERT , UPDATE , DELETE , CREATE , DROP ON * . * TO 'AdminDVD'@'%' IDENTIFIED BY 'Cabale' WITH MAX_QUERIES_PER_HOUR 0 MAX_CONNECTIONS_PER_HOUR 0 MAX_UPDATES_PER_HOUR 0 MAX_USER_CONNECTIONS 0 ;
CREATE TABLE IF NOT EXISTS `dvd` (`Title` varchar(250) COLLATE latin1_general_ci NOT NULL DEFAULT '',`Title_en` varchar(250) COLLATE latin1_general_ci NOT NULL,`Year` int(4) NOT NULL,`Genres` varchar(250) COLLATE latin1_general_ci NOT NULL,`Countries` varchar(32) COLLATE latin1_general_ci NOT NULL,`Score` varchar(6) COLLATE latin1_general_ci DEFAULT '_',`Comments` varchar(250) COLLATE latin1_general_ci NOT NULL DEFAULT '',`Sound` varchar(25) COLLATE latin1_general_ci DEFAULT NULL,`More` varchar(250) COLLATE latin1_general_ci DEFAULT NULL,`IMDB_url` text COLLATE latin1_general_ci NOT NULL,`IMDB_rating` decimal(4,2) NOT NULL,`Id` int(9) NOT NULL AUTO_INCREMENT,`DT_CRT` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,`DT_MOD` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',PRIMARY KEY (`Id`)) CHARSET=latin1 COLLATE=latin1_general_ci COMMENT='DVD library' ;
ALTER TABLE `dvd` CHANGE `DT_CRT` `DT_CRT` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP;
ALTER TABLE `dvd` CHANGE `DT_MOD` `DT_MOD` TIMESTAMP NOT NULL DEFAULT '0000-00-00 00:00:00';  
CREATE TABLE IF NOT EXISTS `dvd_mediainfo` (`Id` int(11) NOT NULL AUTO_INCREMENT, `Id_Movie` int(11) NOT NULL, `MediaTypeFormat` int(11) NOT NULL, `MediaVideoFormat` int(11) NOT NULL, `MediaAudioFormat` int(11) NOT NULL, PRIMARY KEY (`Id`), UNIQUE KEY (`Id_Movie`)) DEFAULT CHARSET=latin1 COLLATE=latin1_general_ci COMMENT='Media informations';
ALTER TABLE `dvd_mediainfo` DROP INDEX `Id_Movie`;
ALTER TABLE `dvd_mediainfo` ADD UNIQUE (`Id_Movie`); 
INSERT IGNORE INTO dvd_mediainfo(Id_Movie, MediaTypeFormat) SELECT dvd.Id,1 FROM dvd LEFT OUTER JOIN dvd_mediainfo ON (dvd.`Id`!=dvd_mediainfo.`Id_Movie`);
CREATE TABLE IF NOT EXISTS `dvd_param_mediainfo` (`Id` int(11) NOT NULL AUTO_INCREMENT,`Info` text COLLATE latin1_general_ci NOT NULL,`Value` text COLLATE latin1_general_ci NOT NULL,`DT_CRT` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,`DT_MOD` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',PRIMARY KEY (`Id`)) DEFAULT CHARSET=latin1 COLLATE=latin1_general_ci COMMENT='Parameters > Media informations' ;
ALTER TABLE `dvd_param_mediainfo` CHANGE `DT_CRT` `DT_CRT` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP;
ALTER TABLE `dvd_param_mediainfo` CHANGE `DT_MOD` `DT_MOD` TIMESTAMP NOT NULL DEFAULT '0000-00-00 00:00:00';
INSERT IGNORE INTO `dvd_param_mediainfo` (`Id`, `Info`, `Value`) VALUES (1, 'MediaTypeFormat', 'DVD'), (2, 'MediaTypeFormat', 'Blu-Ray'), (3, 'MediaTypeFormat', 'Multimedia Files'),(8, 'MediaTypeFormat', 'VCD'),(9, 'MediaTypeFormat', 'HD DVD');
INSERT IGNORE INTO `dvd_param_mediainfo` (`Id`, `Info`, `Value`) VALUES (4, 'MediaVideoFormat', '16/9');
INSERT IGNORE INTO `dvd_param_mediainfo` (`Info`, `Value`) VALUES ('MediaVideoFormat', '1.33:1 (4:3 or 4/3 or \'Normal\' or \'Full Size\')');
INSERT IGNORE INTO `dvd_param_mediainfo` (`Info`, `Value`) VALUES ('MediaVideoFormat', '1.78:1 (16:9 or 16/9 or \'Wide Screen\')');
INSERT IGNORE INTO `dvd_param_mediainfo` (`Info`, `Value`) VALUES ('MediaVideoFormat', '1.85:1 (\'common widescreen\')');
INSERT IGNORE INTO `dvd_param_mediainfo` (`Info`, `Value`) VALUES ('MediaVideoFormat', '2.39:1 (Panavision or CinemaScope)');
INSERT IGNORE INTO `dvd_param_mediainfo` (`Id`, `Info`, `Value`) VALUES (5, 'MediaAudioFormat', 'DTS');
INSERT IGNORE INTO `dvd_param_mediainfo` (`Info`, `Value`) VALUES ('MediaAudioFormat', 'Dolby Digital™'),('MediaAudioFormat', 'DTS Digital Surround™'),('MediaAudioFormat', 'Dolby Surround Pro-Logic™'),('MediaAudioFormat', 'Dolby Digital EX™'),('MediaAudioFormat', 'THX Surround EX™'),('MediaAudioFormat', 'DTS Extended Surround™');
CREATE TABLE IF NOT EXISTS `dvd_user` (`Id` int(10) NOT NULL AUTO_INCREMENT,`User_Status` TEXT NOT NULL,`User_Gender` text NOT NULL,`User_LName` text NOT NULL,`User_FName` text NOT NULL,`Email` text NOT NULL,`User_BirthDT` date NOT NULL,`Address_Site` text NOT NULL,`Address` text NOT NULL,`Address_ZIP` text NOT NULL,`Address_City` text NOT NULL,`Address_Country` text NOT NULL,`User_Login` text NOT NULL,`User_Password` text NOT NULL,`DT_CRT` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,`DT_MOD` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',PRIMARY KEY (`Id`)) CHARSET=latin1 COLLATE=latin1_general_ci COMMENT='Users Table';
CREATE TABLE IF NOT EXISTS `dvd_user_settings` (`Id` INT NOT NULL AUTO_INCREMENT,`Id_User` INT NOT NULL ,`Css` TEXT NOT NULL ,`RowsByPageNb` INT NOT NULL ,`UserRoles` INT NOT NULL ,`DT_CRT` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ,`DT_MOD` TIMESTAMP NOT NULL DEFAULT '0000-00-00 00:00:00',PRIMARY KEY ( `Id` ) ,UNIQUE (`Id_User`)) CHARSET=latin1 COLLATE latin1_general_ci COMMENT = 'Users Settings';
